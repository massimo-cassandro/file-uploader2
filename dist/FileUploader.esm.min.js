const e={alert_unsuitable_browser:"Il tuo browser non ha tutte le funzionalità richieste da questa applicazione.\nUtilizza la versione più recente di Firefox, Edge, Safari, Opera o Chrome",alert_too_much_files:"Puoi selezionare un solo file!",alert_xhr_error:"Si &egrave; verificato un errore nel caricamento del file “<strong>{{file_name}}</strong>”.",alert_file_format_error:"Il file “<strong>{{file_name}}</strong>” è di un formato non consentito",alert_file_size_error:"Le dimensioni di “<strong>{{file_name}}</strong>” ({{file_size}}) superano il valore massimo consentito ({{allowed_size}})",alert_img_err_start_string:"L'immagine “<strong>{{file_name}}</strong>” non è corretta:",alert_img_exact_width_err:"Larghezza non corrispondente ({{image_dimension}}px invece di {{allowed_dimension}}px)",alert_img_min_width_err:"Larghezza inferiore a quella minima consentita ({{image_dimension}}px invece di {{allowed_dimension}}px)",alert_img_max_width_err:"Larghezza superiore a quella massima consentita ({{image_dimension}}px invece di {{allowed_dimension}}px)",alert_img_exact_height_err:"Altezza non corrispondente ({{image_dimension}}px invece di {{allowed_dimension}}px)",alert_img_min_height_err:"Altezza inferiore a quella minima consentita ({{image_dimension}}px invece di {{allowed_dimension}}px)",alert_img_max_height_err:"Altezza superiore a quella massima consentita ({{image_dimension}}px invece di {{allowed_dimension}}px)",alert_img_ratio_err:"La proporzione tra base e altezza dell'immagine non corrisponde a quella richiesta ({{aspect_ratio}})",no_img_test:"Nessuna immagine presente",no_doc_test:"Nessun file presente",remove_btn_text:"Elimina questo file",info_text_std_imgs:"immagini in formato <strong>JPEG</strong>, <strong>PNG</strong>, <strong>GIF</strong> o <strong>WEBP</strong>",info_text_imgs_svg:"immagini in formato <strong>JPEG</strong>, <strong>PNG</strong>, <strong>GIF</strong>, <strong>WEBP</strong> o <strong>SVG</strong>",info_text_imgs_svg_size_info_text:"<strong>Solo immagini non SVG:</strong> ",info_text_img_optimize_info:'Ottimizza le tue immagini prima di caricarle. <a href="https://squoosh.app/" target="_blank">Squoosh</a> è un ottimo (e gratuito) strumento per farlo.',info_text_svg_optimize_info:'È consigliabile ottimizzare i file SVG prima del caricamento, ad esempio tramite <a href="https://jakearchibald.github.io/svgomg/" target="_blank">SVGO</a>',info_text_img_fixed_size:"dimensioni: <strong>{{img_w}}&times;{{img_h}}px</strong>",info_text_img_equal_min_size:"larghezza e altezza non inferiori a <strong>{{img_min_w}}px</strong>",info_text_img_equal_max_size:"larghezza e altezza non superiori a <strong>{{img_max_w}}px</strong>",info_text_img_fixed_width:"larghezza <strong>{{img_w}}px</strong>",info_text_img_fixed_height:"altezza <strong>{{img_h}}px</strong>",info_text_img_width_range:"larghezza compresa tra <strong>{{img_min_w}}px</strong> e <strong>{{img_max_w}}px</strong>",info_text_img_min_width:"larghezza non inferiore a <strong>{{img_min_w}}px</strong>",info_text_img_max_width:"larghezza non superiore a <strong>{{img_max_w}}px</strong>",info_text_img_height_range:"altezza compresa tra <strong>{{img_min_h}}px</strong> e <strong>{{img_max_h}}px</strong>",info_text_img_min_height:"altezza non inferiore a <strong>{{img_min_h}}px</strong>",info_text_img_max_height:"altezza non superiore a <strong>{{img_max_h}}px</strong>",info_text_pdf_file:"file in formato <strong>PDF</strong>",info_text_svg_file:"immagini in formato <strong>SVG</strong>",info_text_max_filesize:"max <strong>{{max_filesize}}</strong>",info_text_img_aspect_ratio:"Il rapporto tra base e altezza dell'immagine deve essere esattamente pari a <strong>{{img_aspect_ratio}}</strong>",img_single_select_text:"Seleziona un'immagine",img_single_drag_text:"&hellip;oppure trascinala qui",img_multiple_select_text:"Seleziona una o pi&ugrave; immagini",img_multiple_drag_text:"&hellip;oppure trascinale qui",doc_single_select_text:"Seleziona un documento",doc_single_drag_text:"&hellip;oppure trascinalo qui",doc_multiple_select_text:"Seleziona uno o pi&ugrave; documenti",doc_multiple_drag_text:"&hellip;oppure trascinali qui",sortable_icon_title_text:"Trascina per cambiare l'ordinamento"},t={uploader_url:null,silent_degradation:!1,unsuitable_browser_callback:null,locales:"it-IT",debug:!1,disabled:!1,alert_api:(e,t,i="error")=>{window.alert(e.replace(/(<([^>]+)>)/gi,""))},filetype:"auto",accept:null,multiple:!1,required:!1,disable_submit:!1,template_main:'<div class="fupl-result"></div><div class="fupl-panel"><div class="fupl-button"><label><input type="file"></label><div class="fupl-dd-text"></div></div><div class="fupl-info-text"></div></div>',template_empty_img:'<div class="fupl-result-empty text-muted small font-italic">{{no_img_text}}}}</div>',template_empty_doc:'<div class="fupl-result-empty text-muted small font-italic">{{no_doc_text}}</div>',template_remove_btn:'<button type="button" class="close fupl-remove-trigger" aria-label="{{remove_btn_text}}" title="{{remove_btn_text}}"><span aria-hidden="true">&times;</span></button>',template_loading_element:'<div class="fupl-loading"><progress class="fupl-progress" max=100 value=0></progress></div>',template_alternative_loading_element:'<div class="spinner-grow text-primary" role="status"><span class="sr-only">Loading...</span></div',template_img_item_single:'<div class="fupl-item"><div class="fupl-remove"></div><img alt="Immagine caricata" class="img-fluid fupl-img"><div class="fupl-file-info"><div class="text-truncate fupl-file-name"></div><div class="fupl-file-size"></div><div class="fupl-extra-fields"></div></div></div>',template_img_item_multiple:'<div class="fupl-item"><div class="fupl-remove"></div><div class="fupl-img-wrapper"><img alt="Immagine caricata" class="img-fluid fupl-img" draggable="false"></div><div class="fupl-file-info"><div class="text-truncate fupl-file-name"></div><div class="fupl-file-size"></div></div><div class="fupl-extra-fields"></div><div class="fupl-sortable-icon"></div></div>',template_doc_item_single:'<div class="fupl-item"><div class="fupl-doc-wrapper"><div class="fupl-remove"></div><div class="fupl-doc text-truncate"><a class="text-truncate fupl-file-name fupl-url" draggable="false"></a></div></div><div class="small ml-1 text-nowrap fupl-file-size"></div><div class="fupl-extra-fields"></div><div class="fupl-sortable-icon"></div></div>',template_doc_item_multiple:null,wrapper_extra_class:null,element_dragover_class:"fupl-is-dragover",uploader_legend:!0,uploader_legend_text:null,uploader_legend_class:null,input_label_class:"btn btn-outline-primary btn-sm",show_info_text:!0,show_optimize_info:!0,info_text_wrap_string:["(",")"],info_text_join_string:" - ",custom_info_text:null,help_text:null,img_w:null,img_h:null,img_min_w:null,img_min_h:null,img_max_w:null,img_max_h:null,img_aspect_ratio:null,aspect_ratio_accuracy:2,max_filesize:null,varname:"file",registered_extra_field_varname:null,init_callback:null,upload_start_callback:null,upload_complete_callback:null,alternative_loading_func:null,values:[],delete_varname:"elimina_file[]",fancybox:!1,fancybox_anchor_markup:'<a class="fupl-url" data-fancybox="fupl-gallery"></a>',fancybox_callback_func:null,sortable:!1,sortable_varname:"fupl_order",sortable_icon:'<div title="{{sortable_icon_title_text}}></div>',extra_fields:null},i={mimetypes:(()=>{let e={auto:null,img:["image/png","image/jpeg","image/pjpeg","image/gif","image/webp",".png",".jpg",".jpeg",".pjpg",".pjpeg",".gif",".webp"],pdf:["application/pdf",".pdf"],svg:["image/svg+xml",".svg",".svgz"]};return e["img+svg"]=e.img.concat(e.svg),e})(),isSuitableBrowser:()=>{if(-1!==navigator.userAgent.indexOf("MSIE")||navigator.appVersion.indexOf("Trident/")>-1||navigator.userAgent.indexOf("Trident/")>-1)return!1;var e=document.createElement("div");return("draggable"in e||"ondragstart"in e&&"ondrop"in e)&&"FormData"in window&&"FileReader"in window&&"fetch"in window},set_has_values:e=>{let t=e.istance_result_wrapper.querySelectorAll(".fupl-item").length;e.wrapper.dataset.hasValues=t?"true":"false",t||(e.istance_result_wrapper.innerHTML=e.templates.no_file[e._type])},parse_bytes_value:(e,t)=>{let i=1048576;return(e=+e)>=i?(e/i).toLocaleString(t,{maximumFractionDigits:1})+'<span class="fupl-unit">MB</span>':e<1024?Number((e/1024).toFixed(2)).toLocaleString(t,{maximumFractionDigits:2})+'<span class="fupl-unit">KB</span>':Math.round(e/1024).toLocaleString(t,{maximumFractionDigits:0})+'<span class="fupl-unit">KB</span>'},parse_max_filesize:(e,t)=>{if(e){var i,a,l;if(isNaN(e)){if(a=e.substr(-2,2).toUpperCase(),l=i=+e.substr(0,e.length-2),isNaN(i)||"KB"!==a&&"MB"!==a)return!1}else a="KB",l=i=+e;return i>=1024&&"KB"===a&&(a="MB",l=Math.round(i/1024*100)/100),"KB"===a?i*=1024:i=1024*i*1024,{maxbytes:i,feedback_size:l.toLocaleString(t,{maximumFractionDigits:"KB"===a?0:1})+'<span class="fupl-unit">'+a+"</span>"}}return null},exec_callback:(e,t)=>{try{if("string"==typeof e){let i=window;e.split(".").forEach((function(e){i=i[e]})),i(t)}else e(t)}catch(t){alert(`Error: “${e}” callback function doesn't exist`),console.error(t)}}};function a(e){try{let t=e.opts.element.querySelector('input[type="file"]'),a=e.opts.element.querySelector("label");if(console.log(e.opts.element),"auto"===e.opts.filetype){let i=[],a=[];null!==e.opts.accept&&(a=e.opts.accept.split(",").map((e=>e.trim()))),t&&t.getAttribute("accept")&&(i=t.getAttribute("accept").split(",").map((e=>e.trim()))),e.opts.accept=[...new Set([...a,...i])]}else e.opts.accept=i.mimetypes[e.opts.filetype];let l=i.parse_max_filesize(e.opts.max_filesize,e.opts.locales);if(!1===l)throw new Error(`FileUploader: incorrect value for “max_filesize” parameter (${e.opts.max_filesize})`);if(e.opts.max_filesize=l,e.opts.multiple=Boolean(e.opts.multiple||t&&t.hasAttribute("multiple")),e.opts.required=Boolean(e.opts.required||t&&t.hasAttribute("required")),e.opts.disabled=Boolean(e.opts.disabled||t&&t.hasAttribute("disabled")),e.opts._type=-1!==["img","svg","img+svg"].indexOf(e.opts.filetype)?"img":"doc",e.opts._mode=e.opts.multiple?"multiple":"single",!e.opts.uploader_legend_text&&a&&(e.opts.uploader_legend_text=a.innerHTML),e.opts.uploader_legend_text||(e.opts.uploader_legend_text="__legend not present__"),e.opts.element.classList.add("fupl"),e.opts.wrapper=document.createElement("fieldset"),e.opts.element.parentNode.insertBefore(e.opts.wrapper,e.opts.element),e.opts.wrapper.appendChild(e.opts.element),e.opts.wrapper.classList.add("fupl-wrapper"),e.opts.wrapper.classList.add("fupl-type-"+e.opts._type),e.opts.multiple&&e.opts.wrapper.classList.add("fupl-multiple"),e.opts.wrapper_extra_class&&e.opts.wrapper.classList.add(...e.opts.wrapper_extra_class.split(" ")),e.opts.uploader_legend){let t=["fupl-legend"];e.opts.uploader_legend_class&&t.push(e.opts.uploader_legend_class),e.opts.required&&t.push("required"),e.opts.element.insertAdjacentHTML("beforebegin","<legend"+(t.length?' class="'+t.join(" ")+'"':"")+">"+e.opts.uploader_legend_text+"</legend>"),e.opts.wrapper.classList.add("fupl-has-legend")}if(e.opts.element.innerHTML=e.opts.template_main,e.opts.istance_input=e.opts.element.querySelector('.fupl-panel input[type="file"]'),e.opts.istance_label=e.opts.element.querySelector(".fupl-panel label"),e.opts.istance_dd_text=e.opts.element.querySelector(".fupl-panel .fupl-dd-text"),e.opts.istance_info_text=e.opts.element.querySelector(".fupl-panel .fupl-info-text"),e.opts.istance_result_wrapper=e.opts.element.querySelector(".fupl-result"),e.opts.multiple&&e.opts.istance_input.setAttribute("multiple",""),null!==e.opts.accept&&e.opts.istance_input.setAttribute("accept",e.opts.accept.join(",")),e.opts.required&&(e.opts.wrapper.dataset.required="true"),e.opts.disabled&&(e.opts.wrapper.setAttribute("disabled",!0),e.opts.wrapper.setAttribute("aria-disabled",!0)),e.opts.istance_label.insertAdjacentHTML("beforeend",e.strs[`${e.opts._type}_${e.opts._mode}_select_text`]),e.opts.input_label_class&&e.opts.istance_label.classList.add(...e.opts.input_label_class.split(" ")),e.opts.istance_dd_text.innerHTML=e.strs[`${e.opts._type}_${e.opts._mode}_drag_text`],e.opts.show_info_text&&(e.opts.custom_info_text&&(e.opts.istance_info_text.innerHTML=e.opts.custom_info_text),e.opts.help_text&&e.opts.istance_info_text.insertAdjacentHTML("beforeend",`<div class="fupl-help-text">${e.opts.help_text}</div>`)),e.opts.sortable&&(!e.opts.multiple||!e.opts.sortable_varname))throw new Error(`FileUploader: incorrect “sortable” settings:\n"sortable": ${e.opts.sortable?"true":"false"}\n"multiple": ${e.opts.multiple?"true":"false"}\n"sortable_varname": "${e.opts.sortable_varname}"`);if(e.opts.values){if("object"!=typeof e.opts.values)throw new Error("FileUploader: incorrect “values” parameter");Array.isArray(e.opts.values)||(e.opts.values=[e.opts.values])}e.opts.debug&&(console.groupCollapsed("FileUploader options"),console.log(e.opts),console.groupEnd())}catch(e){console.error(e)}}
/*!@preserve
 *
 * FileUploader 2
 * HTML5 / JS Async Uploader
 * Massimo Cassandro 2017-2020
 *
 */
function l(l){!function(e){if(!i.isSuitableBrowser())return e.opts.silent_degradation||alert(e.strs.alert_unsuitable_browser),void(e.opts.unsuitable_browser_callback&&i.exec_callback(e.opts.unsuitable_browser_callback));e.css&&document.head.insertAdjacentHTML("beforeend",'<link rel="stylesheet" href="'+e.css+'" type="text/css" media="all">'),document.querySelectorAll(e.selector).forEach((t=>{let l=Object.assign({},t.dataset);delete l.fileUploader;let s=Object.assign({},e.opts,JSON.parse(t.dataset.fileUploader||"{}"),l);s.element=t;try{if(!s.uploader_url)throw new Error("FileUploader: missing `uploader_url` parameter");if(s.filetype=s.filetype.toLowerCase(),s.aspect_ratio_accuracy=10**+s.aspect_ratio_accuracy,-1!==["svg+img","img-svg","svg-img"].indexOf(s.filetype)&&(s.filetype="img+svg"),-1===Object.keys(i.mimetypes).indexOf(s.filetype))throw new Error("FileUploader: incorrect `filetype` parameter")}catch(e){console.error(e)}["input_text","templates","info_text_wrap_string","values","extra_fields"].forEach((e=>{try{"string"==typeof s[e]&&(s[e]=JSON.parse(s[e]))}catch(t){console.error(`FileUploader: the “${e}” parameter is not a valid json`),console.log(s.element),console.error(t)}}));for(let e in s)"string"==typeof s[e]&&-1!==["true","false","null"].indexOf(s[e].toLowerCase())&&(s[e]=JSON.parse(s[e]));if(s.img_aspect_ratio&&s.img_w&&s.img_h&&(console.error("FileUploader: the aspect ratio parameter will be ignored, because exact constraints have been set for width and height"),s.img_aspect_ratio=null),s.parsed_img_aspect_ratio=null,s.img_aspect_ratio)try{if(isNaN(s.img_aspect_ratio)){let e,t;-1!==s.img_aspect_ratio.indexOf("/")?[e,t]=s.img_aspect_ratio.split("/"):-1!==s.img_aspect_ratio.indexOf(":")&&([e,t]=s.img_aspect_ratio.split(":")),s.parsed_img_aspect_ratio=e&&t?+e/+t:Number(s.img_aspect_ratio)}else s.parsed_img_aspect_ratio=+s.img_aspect_ratio;if(s.parsed_img_aspect_ratio&&(s.parsed_img_aspect_ratio=Math.round((s.parsed_img_aspect_ratio+Number.EPSILON)*s.aspect_ratio_accuracy)/s.aspect_ratio_accuracy),isNaN(s.parsed_img_aspect_ratio)||!s.parsed_img_aspect_ratio)throw new Error}catch(e){console.error("FileUploader: incorrect aspect ratio parameter → "+s.img_aspect_ratio),s.img_aspect_ratio=null,s.parsed_img_aspect_ratio=null}new a({strs:e.strs,opts:s})}))}({selector:l.selector||"[data-file-uploader]",opts:Object.assign({},t,l.options||{}),css:l.css||null,strs:Object.assign({},e,l.local_strs||{})})}export{l as FileUploader};
